(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1394],{3801:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin/routes/editArticle",function(){return n(4088)}])},140:function(e,t){"use strict";t.Z={src:"/_next/static/media/loadingshop.3e55c8c5.gif",height:600,width:900}},3016:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(5893),a=n(7294);function i(e){var t=e.setProperty,i=e.data,s=(0,a.useRef)(),c=(0,a.useState)(!1),o=c[0],u=c[1],l=s.current||{},d=l.CKEditor,h=l.ClassicEditor;l.ImageInsert;return(0,a.useEffect)((function(){s.current={CKEditor:n(2757).CKEditor,ClassicEditor:n(5234)},u(!0)}),[]),o?(0,r.jsx)(d,{editor:h,class:".ck.ck-editor__editable_inline ",data:i,onChange:function(e,n){var r=n.getData();t(r)},config:{ckfinder:{uploadUrl:"https://dreamwebbackend.herokuapp.com/upload",withCredentials:!0,headers:{"X-CSRF-TOKEN":"CSFR-Token",Authorization:"Bearer <JSON Web Token>"}}}}):(0,r.jsx)("div",{children:"Editor loading"})}},4088:function(e,t,n){"use strict";n.r(t);var r=n(4051),a=n.n(r),i=n(5893),s=n(7294),c=n(9669),o=n.n(c),u=n(3016),l=n(140),d=n(5675),h=n(7479);function p(e,t,n,r,a,i,s){try{var c=e[i](s),o=c.value}catch(u){return void n(u)}c.done?t(o):Promise.resolve(o).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){p(i,r,a,s,c,"next",e)}function c(e){p(i,r,a,s,c,"throw",e)}s(void 0)}))}}t.default=function(){var e=(0,s.useState)(""),t=e[0],n=e[1],r=(0,s.useState)([]),c=(r[0],r[1]),p=(0,s.useState)(""),x=p[0],g=p[1],v=(0,s.useState)(""),m=v[0],j=v[1],w=(0,s.useState)(!1),k=w[0],C=w[1],b=(0,s.useState)([]),y=b[0],_=b[1],E=(0,s.useState)(""),S=E[0],N=E[1],T=(0,s.useState)(!1),M=T[0],P=T[1],R=(0,s.useState)(!1),D=R[0],A=R[1],K=(0,s.useState)(null),O=K[0],z=K[1],F=(0,s.useContext)(h.Z).Api,I=function(){var e=f(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),C(!0),r=new FormData,e.prev=3,r.append("title",t),r.append("image",x),r.append("id",D),r.append("info",m),e.next=10,o().put("".concat(F,"/adminRoute/ArticleUpdate"),r,{withCredentials:!0}).then((function(e){e.data.errMessage&&(alert(e.data.errMessage),setErr(e.data.errMessage),C(!1)),alert(e.data.Message),setMessage(e.data.Message),C(!1),P(!1)}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),C(!1);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=f(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("".concat(F,"/allRoutes/articles"),{withCredentials:!0}).then((function(e){_(e.data.findPost)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){L()}),[]);var X=function(){var e=f(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files[0],g(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=f(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={image:O.image},C(!0),e.next=5,o().put("".concat(F,"/adminRoute/delete/articles/").concat(O._id," "),n,{withCredentials:!0}).then((function(e){alert(e.data.Message),C(!1),z(null),P("")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"products",children:[O&&(0,i.jsx)("div",{onClick:function(){return z(null)},id:"backDrop",children:"hello"}),O&&(0,i.jsxs)("div",{className:"secc-comment",children:[(0,i.jsx)("img",{src:"/uploads/warning.png",alt:""}),(0,i.jsx)("h1",{children:"\u0622\u06cc\u0627 \u0627\u06cc\u0646 \u067e\u0633\u062a \u062d\u0630\u0641 \u0634\u0648\u062f \u061f"}),(0,i.jsx)("button",{style:{background:"#fe1919"},onClick:Z,children:" \u062d\u0630\u0641 \u067e\u0633\u062a"})]}),!M&&(0,i.jsx)("div",{className:"edit-tabels",style:{zIndex:"13"},children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("b",{children:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0645\u0642\u0627\u0644\u0627\u062a"}),(0,i.jsx)("input",{style:{marginTop:"10px"},placeholder:"\u062c\u0633\u062a\u062c\u0648...",onChange:function(e){return N(e.target.value)}})]}),0===y.length&&(0,i.jsx)("div",{style:{width:"100%",height:"450px",position:"relative",margin:"auto"},children:(0,i.jsx)(d.default,{src:l.Z,layout:"fill",alt:""})}),y.length>0&&(0,i.jsxs)("table",{children:[(0,i.jsxs)("thead",{children:[(0,i.jsx)("th",{children:(0,i.jsx)("a",{href:"#",children:"\u062a\u0635\u0648\u06cc\u0631"})}),(0,i.jsx)("th",{children:(0,i.jsx)("a",{href:"#",children:" \u0646\u0627\u0645 "})}),(0,i.jsx)("th",{children:(0,i.jsx)("a",{href:"#",children:"\u062f\u06cc\u062f\u06af\u0627\u0647"})})]}),(0,i.jsx)("tbody",{children:y.length>0&&y.filter((function(e){return e.title.toLowerCase().includes(S.toLocaleLowerCase())})).map((function(e){return(0,i.jsxs)("tr",{onClick:function(){P(e),n(e.title),c(e.des),j(e.info),A(e._id)},children:[(0,i.jsx)("td",{children:(0,i.jsx)("img",{src:"/uploads/".concat(e.image),alt:""})}),(0,i.jsx)("td",{children:e.title}),(0,i.jsx)("td",{children:e.comments.length})]})}))}),(0,i.jsx)("tfoot",{})]})]})}),M.title&&(0,i.jsxs)("form",{style:{height:"100%",marginTop:"-10px"},encType:"multipart/form-data",children:[(0,i.jsxs)("div",{style:{width:"90%",background:"#3f51b5",padding:"10px",borderRadius:"10px",color:"white",position:"relative"},children:["\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0645\u0642\u0627\u0644\u0627\u062a",(0,i.jsx)("button",{disabled:k,onClick:function(e){e.preventDefault(),z(M)},style:{top:"-17px",padding:"10px",position:"absolute",left:"3px",fontSize:"12px",width:"max-content",height:"max-content",background:"red"},children:"\u062d\u0630\u0641 \u0645\u0642\u0627\u0644\u0647"})]}),(0,i.jsx)("input",{placeholder:"title",value:t,onChange:function(e){return n(e.target.value)}}),(0,i.jsx)("input",{placeholder:"\u062a\u0635\u0648\u06cc\u0631",type:"file",filename:"image",onChange:X}),(0,i.jsx)(u.default,{setProperty:j,data:m}),(0,i.jsxs)("button",{disabled:k,onClick:I,children:[k&&(0,i.jsx)("div",{style:{height:"30px",width:"30px",top:"25%"},className:"loading-spinner"}),"\u062a\u0627\u06cc\u06cc\u062f \u0648\u06cc\u0631\u0627\u06cc\u0634"]})]})]})}}},function(e){e.O(0,[2554,5675,2757,9774,2888,179],(function(){return t=3801,e(e.s=t);var t}));var t=e.O();_N_E=t}]);